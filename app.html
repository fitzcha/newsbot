<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fitz Intelligence</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
* { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
body { background:#f8fafc; color:#1e293b; font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif; }

.top-bar { position:sticky; top:0; z-index:200; background:#fff; border-bottom:1px solid #e2e8f0; }
.header-row { display:flex; justify-content:space-between; align-items:center; padding:14px 20px 10px; }
.brand { font-size:14px; font-weight:800; color:#1e293b; }
.collapse-btn { background:none; border:none; cursor:pointer; padding:6px 10px; border-radius:8px; color:#94a3b8; font-size:12px; font-weight:600; }

/* ì ‘íŒ ìƒíƒœ */
.collapsed-bar { display:none; padding:6px 20px 10px; align-items:center; gap:0; }
.collapsed-bar.hidden { display:none; }
.c-chip { position:relative; display:inline-flex; align-items:center; gap:4px; flex-shrink:0; font-size:11px; font-weight:600; padding:5px 10px; border-radius:8px; cursor:pointer; white-space:nowrap; border:1px solid #e2e8f0; background:#f8fafc; color:#475569; user-select:none; }
.c-chip .arrow { font-size:8px; color:#94a3b8; margin-left:2px; }
.c-chip.date-c  { background:#f1f5f9; border-color:#e2e8f0; color:#475569; }
.c-chip.agent-c { background:#eff6ff; border-color:#bfdbfe; color:#2563eb; }
.c-chip.agent-c[data-a="STOCK"] { background:#ecfeff; border-color:#a5f3fc; color:#0891b2; }
.c-chip.agent-c[data-a="PM"]    { background:#f5f3ff; border-color:#ddd6fe; color:#7c3aed; }
.c-chip.kw-c    { background:#f1f5f9; border-color:#e2e8f0; color:#1e293b; }
.c-sep { color:#e2e8f0; font-size:14px; padding:0 5px; flex-shrink:0; }

.c-dropdown { display:none; position:absolute; top:calc(100% + 6px); left:0; background:#fff; border:1px solid #e2e8f0; border-radius:10px; box-shadow:0 4px 20px rgba(0,0,0,.1); z-index:400; min-width:140px; overflow:hidden; }
.c-dropdown.open { display:block; }
.c-dd-item { padding:10px 14px; font-size:12px; font-weight:600; color:#334155; cursor:pointer; display:flex; align-items:center; gap:8px; }
.c-dd-item:hover { background:#f8fafc; }
.c-dd-item.active { color:#2563eb; background:#eff6ff; }
.c-dd-dot { width:6px; height:6px; border-radius:50%; flex-shrink:0; }

/* í¼ì³ì§„ ìƒíƒœ */
.date-row { padding:0 20px 10px; display:flex; gap:6px; overflow-x:auto; scrollbar-width:none; }
.date-row::-webkit-scrollbar { display:none; }
.date-chip { flex-shrink:0; padding:4px 12px; border-radius:20px; font-size:11px; font-weight:600; border:1px solid #e2e8f0; color:#64748b; background:#fff; cursor:pointer; }
.date-chip.active { background:#1e293b; color:#fff; border-color:#1e293b; }

.agent-row { padding:0 20px 10px; display:flex; gap:6px; overflow-x:auto; scrollbar-width:none; }
.agent-row::-webkit-scrollbar { display:none; }
.agent-chip { flex-shrink:0; display:flex; align-items:center; gap:5px; padding:7px 14px; border-radius:20px; font-size:12px; font-weight:600; border:1.5px solid #e2e8f0; color:#64748b; background:#fff; cursor:pointer; transition:all .15s; }
.agent-chip[data-a="BA"].active    { background:#2563eb; border-color:#2563eb; color:#fff; }
.agent-chip[data-a="STOCK"].active { background:#0891b2; border-color:#0891b2; color:#fff; }
.agent-chip[data-a="PM"].active    { background:#7c3aed; border-color:#7c3aed; color:#fff; }
.agent-dot { width:6px; height:6px; border-radius:50%; background:currentColor; }

.kw-nav { padding:0 20px 12px; display:flex; gap:6px; overflow-x:auto; scrollbar-width:none; border-bottom:1px solid #f1f5f9; align-items:center; }
.kw-nav::-webkit-scrollbar { display:none; }
.kw-chip { flex-shrink:0; padding:5px 12px; border-radius:20px; font-size:12px; font-weight:600; border:1.5px solid #e2e8f0; color:#94a3b8; background:#fff; cursor:pointer; transition:all .2s; }
.kw-chip.active { background:#f1f5f9; color:#1e293b; border-color:#cbd5e1; }
.kw-edit-btn { flex-shrink:0; margin-left:4px; padding:5px 10px; border-radius:20px; font-size:11px; font-weight:600; border:1.5px dashed #94a3b8; color:#94a3b8; background:transparent; cursor:pointer; display:flex; align-items:center; gap:4px; }

.collapsible { }
.top-bar.collapsed .collapsible { display:none; }
.top-bar.collapsed .collapsed-bar { display:flex; }
.top-bar.collapsed .collapsed-bar.hidden { display:none; }

/* í”¼ë“œ */
.feed { padding:20px; display:flex; flex-direction:column; gap:28px; padding-bottom:80px; }
.kw-section { display:flex; flex-direction:column; gap:12px; }
.kw-section-header { display:flex; align-items:center; justify-content:space-between; }
.kw-title { font-size:18px; font-weight:800; color:#0f172a; }
.kw-meta { font-size:11px; color:#94a3b8; }

/* ë¸Œë¦¬í•‘ ì¹´ë“œ */
.brief-card { background:#fff; border:1px solid #e2e8f0; border-radius:14px; overflow:hidden; }
.brief-card[data-a="BA"]    { border-top:3px solid #2563eb; }
.brief-card[data-a="STOCK"] { border-top:3px solid #0891b2; }
.brief-card[data-a="PM"]    { border-top:3px solid #7c3aed; }
.brief-header { padding:16px 18px 12px; }
.brief-agent-label { font-size:10px; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; margin-bottom:6px; }
.brief-agent-label[data-a="BA"]    { color:#2563eb; }
.brief-agent-label[data-a="STOCK"] { color:#0891b2; }
.brief-agent-label[data-a="PM"]    { color:#7c3aed; }
.brief-summary { font-size:15px; font-weight:700; color:#0f172a; line-height:1.5; }
.brief-points { padding:4px 18px 14px; display:flex; flex-direction:column; gap:8px; }
.brief-point { display:flex; gap:8px; align-items:flex-start; }
.brief-dot { width:5px; height:5px; border-radius:50%; flex-shrink:0; margin-top:7px; }
.brief-dot[data-a="BA"]    { background:#2563eb; }
.brief-dot[data-a="STOCK"] { background:#0891b2; }
.brief-dot[data-a="PM"]    { background:#7c3aed; }
.brief-text { font-size:13px; color:#475569; line-height:1.7; }

/* ë´‰íˆ¬ ë²„íŠ¼ */
.secret-btn { margin:0 14px 14px; border:1.5px solid #e2e8f0; width:calc(100% - 28px); background:#fff; border-radius:10px; padding:10px 14px; cursor:pointer; display:flex; align-items:center; gap:10px; transition:background .15s; }
.secret-btn:active { background:#f8fafc; }
.envelope-wrap { position:relative; width:32px; height:24px; flex-shrink:0; }
.envelope-wrap svg { width:32px; height:24px; }
.env-lid { transform-origin:50% 0%; transition:transform .35s ease; }
.secret-btn.open .env-lid { transform:rotateX(160deg); }
.secret-text-wrap { display:flex; flex-direction:column; align-items:flex-start; gap:1px; flex:1; }
.secret-title { font-size:12px; font-weight:700; color:#334155; }
.secret-sub { font-size:10px; color:#94a3b8; }
.secret-chevron { font-size:10px; color:#cbd5e1; transition:transform .3s; }
.secret-btn.open .secret-chevron { transform:rotate(180deg); }

/* ì‹œí¬ë¦¿ íŒ¨ë„ */
.secret-panel { max-height:0; overflow:hidden; transition:max-height .4s ease; background:#f8fafc; border-top:1px solid #e2e8f0; }
.secret-panel.open { max-height:700px; }
.secret-inner { padding:16px 18px; display:flex; flex-direction:column; gap:12px; }
.secret-agent-header { display:flex; align-items:center; gap:8px; padding-bottom:10px; border-bottom:1px solid #e2e8f0; }
.secret-agent-badge { font-size:10px; font-weight:700; letter-spacing:.8px; padding:3px 10px; border-radius:20px; }
.secret-agent-badge[data-a="BA"]    { background:#eff6ff; color:#2563eb; }
.secret-agent-badge[data-a="STOCK"] { background:#ecfeff; color:#0891b2; }
.secret-agent-badge[data-a="PM"]    { background:#f5f3ff; color:#7c3aed; }
.secret-agent-sub { font-size:11px; color:#94a3b8; font-weight:600; }
.s-headline { font-size:13px; font-weight:700; color:#1e293b; line-height:1.55; margin-bottom:6px; }
.s-text { font-size:13px; color:#475569; line-height:1.75; }

/* í—¤ë“œë¼ì¸ */
.headlines-card { background:#fff; border:1px solid #e2e8f0; border-radius:14px; overflow:hidden; }
.hl-label { padding:12px 18px 8px; font-size:10px; font-weight:700; color:#94a3b8; letter-spacing:1.5px; text-transform:uppercase; }
.hl-item { padding:11px 18px; border-top:1px solid #f1f5f9; display:flex; gap:10px; align-items:flex-start; cursor:pointer; }
.hl-item:active { background:#f8fafc; }
.hl-num { font-size:11px; font-weight:700; color:#cbd5e1; flex-shrink:0; padding-top:2px; }
.hl-title { font-size:13px; font-weight:600; color:#334155; line-height:1.5; margin-bottom:2px; }
.hl-summary { font-size:11px; color:#94a3b8; line-height:1.5; }

.fab { position:fixed; bottom:28px; right:20px; background:#1e293b; color:#fff; border:none; border-radius:50px; padding:12px 18px; font-size:13px; font-weight:600; cursor:pointer; display:flex; align-items:center; gap:6px; box-shadow:0 4px 20px rgba(0,0,0,.15); z-index:100; }

/* ëª¨ë‹¬ */
.modal-overlay { display:none; position:fixed; inset:0; background:rgba(0,0,0,.4); z-index:300; align-items:flex-end; }
.modal-overlay.open { display:flex; }
.modal { background:#fff; border-radius:20px 20px 0 0; padding:24px 20px 40px; width:100%; max-height:85vh; overflow-y:auto; }
.modal-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; }
.modal-title { font-size:16px; font-weight:700; color:#0f172a; }
.modal-close { font-size:20px; color:#94a3b8; border:none; background:none; cursor:pointer; }
.modal-notice { font-size:11px; color:#f59e0b; background:#fffbeb; border:1px solid #fde68a; border-radius:8px; padding:8px 12px; margin-bottom:16px; display:flex; align-items:center; gap:6px; }
.form-label { font-size:12px; font-weight:600; color:#64748b; margin-bottom:6px; display:block; }
.form-textarea { width:100%; border:1.5px solid #e2e8f0; border-radius:10px; padding:10px 14px; font-size:14px; color:#1e293b; margin-bottom:14px; outline:none; font-family:inherit; resize:none; height:100px; }
.rating-row { display:flex; gap:8px; margin-bottom:14px; }
.rating-btn { flex:1; padding:10px; border:1.5px solid #e2e8f0; border-radius:10px; font-size:20px; background:#fff; cursor:pointer; }
.rating-btn.selected { border-color:#2563eb; background:#eff6ff; }
.submit-btn { width:100%; background:#2563eb; color:#fff; border:none; border-radius:12px; padding:14px; font-size:14px; font-weight:700; cursor:pointer; }
.kw-list { display:flex; flex-direction:column; gap:8px; margin-bottom:16px; }
.kw-manage-item { display:flex; align-items:center; justify-content:space-between; padding:10px 14px; background:#f8fafc; border:1px solid #e2e8f0; border-radius:10px; }
.kw-manage-name { font-size:14px; font-weight:600; color:#1e293b; }
.kw-del-btn { background:none; border:none; color:#94a3b8; font-size:16px; cursor:pointer; padding:4px; }
.kw-add-row { display:flex; gap:8px; }
.kw-add-input { flex:1; border:1.5px solid #e2e8f0; border-radius:10px; padding:10px 14px; font-size:14px; outline:none; font-family:inherit; }
.kw-add-input:focus { border-color:#2563eb; }
.kw-add-btn { background:#2563eb; color:#fff; border:none; border-radius:10px; padding:10px 16px; font-size:13px; font-weight:700; cursor:pointer; }

@keyframes fadeUp { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }
</style>
</head>
<body>

<div class="top-bar" id="topBar">
  <div class="header-row">
    <span class="brand">Fitz Intelligence</span>
    <button class="collapse-btn" onclick="toggleTopBar()" id="collapseBtn">ì ‘ê¸° â–²</button>
  </div>

  <!-- ì ‘íŒ ìƒíƒœ ë“œë¡­ë‹¤ìš´ ì¹© -->
  <div class="collapsed-bar hidden" id="collapsedBar">
    <div class="c-chip date-c" id="chip-date" onclick="toggleDD('dd-date',event)">
      <span id="chip-date-txt">02.21 ì˜¤ëŠ˜</span><span class="arrow">â–¼</span>
      <div class="c-dropdown" id="dd-date">
        <div class="c-dd-item active" onclick="selectDate('02.21 ì˜¤ëŠ˜',event)">02.21 ì˜¤ëŠ˜</div>
        <div class="c-dd-item" onclick="selectDate('02.20',event)">02.20</div>
        <div class="c-dd-item" onclick="selectDate('02.19',event)">02.19</div>
      </div>
    </div>
    <span class="c-sep">Â·</span>
    <div class="c-chip agent-c" id="chip-agent" data-a="BA" onclick="toggleDD('dd-agent',event)">
      <span id="chip-agent-txt">ë¹„ì¦ˆë‹ˆìŠ¤</span><span class="arrow">â–¼</span>
      <div class="c-dropdown" id="dd-agent">
        <div class="c-dd-item active" onclick="selectAgentDD('BA','ë¹„ì¦ˆë‹ˆìŠ¤',event)"><span class="c-dd-dot" style="background:#2563eb"></span>ë¹„ì¦ˆë‹ˆìŠ¤</div>
        <div class="c-dd-item" onclick="selectAgentDD('STOCK','ì£¼ì‹',event)"><span class="c-dd-dot" style="background:#0891b2"></span>ì£¼ì‹</div>
        <div class="c-dd-item" onclick="selectAgentDD('PM','ê¸°íš',event)"><span class="c-dd-dot" style="background:#7c3aed"></span>ê¸°íš</div>
      </div>
    </div>
    <span class="c-sep">Â·</span>
    <div class="c-chip kw-c" id="chip-kw" onclick="toggleDD('dd-kw',event)">
      <span id="chip-kw-txt"># K-ë°”ì´ì˜¤</span><span class="arrow">â–¼</span>
      <div class="c-dropdown" id="dd-kw">
        <div class="c-dd-item active" onclick="jumpKwDD(0,event)"># K-ë°”ì´ì˜¤</div>
        <div class="c-dd-item" onclick="jumpKwDD(1,event)"># AIë°˜ë„ì²´</div>
        <div class="c-dd-item" onclick="jumpKwDD(2,event)"># ë¯¸êµ­ì¦ì‹œ</div>
      </div>
    </div>
  </div>

  <div class="collapsible">
    <div class="date-row">
      <div class="date-chip active">02.21 ì˜¤ëŠ˜</div>
      <div class="date-chip">02.20</div>
      <div class="date-chip">02.19</div>
    </div>
    <div class="agent-row">
      <div class="agent-chip active" data-a="BA"    onclick="selectAgent('BA','ë¹„ì¦ˆë‹ˆìŠ¤',this)"><span class="agent-dot"></span>ë¹„ì¦ˆë‹ˆìŠ¤</div>
      <div class="agent-chip"        data-a="STOCK" onclick="selectAgent('STOCK','ì£¼ì‹',this)"><span class="agent-dot"></span>ì£¼ì‹</div>
      <div class="agent-chip"        data-a="PM"    onclick="selectAgent('PM','ê¸°íš',this)"><span class="agent-dot"></span>ê¸°íš</div>
    </div>
    <div class="kw-nav">
      <div class="kw-chip active" id="nav-kw-0" onclick="scrollToKw('kw-0',this)"># K-ë°”ì´ì˜¤</div>
      <div class="kw-chip"        id="nav-kw-1" onclick="scrollToKw('kw-1',this)"># AIë°˜ë„ì²´</div>
      <div class="kw-chip"        id="nav-kw-2" onclick="scrollToKw('kw-2',this)"># ë¯¸êµ­ì¦ì‹œ</div>
      <button class="kw-edit-btn" onclick="openModal('kw-modal')">âœï¸ ìˆ˜ì •í•˜ê¸°</button>
    </div>
  </div>
</div>

<div class="feed">

  <!-- K-ë°”ì´ì˜¤ -->
  <div class="kw-section" id="kw-0">
    <div class="kw-section-header"><span class="kw-title"># K-ë°”ì´ì˜¤</span><span class="kw-meta">ê¸°ì‚¬ 3ê±´</span></div>
    <div class="brief-card" id="card-0" data-a="BA">
      <div class="brief-header">
        <div class="brief-agent-label" id="card-0-label" data-a="BA">â— ë¹„ì¦ˆë‹ˆìŠ¤ ë¶„ì„</div>
        <div class="brief-summary" id="card-0-summary">CMO ìˆ˜ì£¼Â·ë°”ì´ì˜¤ì‹œë°€ëŸ¬ ê¸€ë¡œë²Œ ì§„ì¶œë¡œ K-ë°”ì´ì˜¤ ì„±ì¥ ëª¨ë©˜í…€ ê°•í™”</div>
      </div>
      <div class="brief-points" id="card-0-points"></div>
      <button class="secret-btn" id="sbtn-0" onclick="toggleSecret(0)">
        <div class="envelope-wrap" id="env-0"></div>
        <div class="secret-text-wrap">
          <span class="secret-title">ë§ì¶¤ ë¸Œë¦¬í•‘ ë„ì°©</span>
          <span class="secret-sub" id="secret-sub-0">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
        </div>
        <span class="secret-chevron">â–¼</span>
      </button>
      <div class="secret-panel" id="s0"><div class="secret-inner" id="si-0"></div></div>
    </div>
    <div class="headlines-card">
      <div class="hl-label">ì˜¤ëŠ˜ì˜ í—¤ë“œë¼ì¸</div>
      <div class="hl-item"><span class="hl-num">01</span><div><div class="hl-title">ì‚¼ì„±ë°”ì´ì˜¤ë¡œì§ìŠ¤, ìœ ëŸ½ CMO ìˆ˜ì£¼ 1ì¡° ë‹¬ì„±â€¦ê¸€ë¡œë²Œ 1ìœ„ êµ³íˆê¸°</div><div class="hl-summary">ê¸€ë¡œë²Œ ìœ„íƒìƒì‚° ê²½ìŸì—ì„œ ìœ ëŸ½ ì‹œì¥ ì ìœ ìœ¨ í™•ëŒ€</div></div></div>
      <div class="hl-item"><span class="hl-num">02</span><div><div class="hl-title">ì…€íŠ¸ë¦¬ì˜¨, ë°”ì´ì˜¤ì‹œë°€ëŸ¬ ë¯¸êµ­ FDA ìµœì¢… ìŠ¹ì¸â€¦ì—°ë‚´ ì¶œì‹œ í™•ì •</div><div class="hl-summary">ë¯¸êµ­ ì‹œì¥ ì§„ì…ìœ¼ë¡œ ì—°ê°„ ë§¤ì¶œ 30% ì„±ì¥ ì „ë§</div></div></div>
      <div class="hl-item"><span class="hl-num">03</span><div><div class="hl-title">K-ë°”ì´ì˜¤ í€ë“œ ì™¸êµ­ì¸ ìˆœë§¤ìˆ˜ 3ê°œì›” ì—°ì†â€¦ê¸°ê´€ ê´€ì‹¬ ì§‘ì¤‘</div><div class="hl-summary">ì¤‘ì¥ê¸° ì„±ì¥ ê¸°ëŒ€ê° ë°˜ì˜</div></div></div>
    </div>
  </div>

  <!-- AIë°˜ë„ì²´ -->
  <div class="kw-section" id="kw-1">
    <div class="kw-section-header"><span class="kw-title"># AIë°˜ë„ì²´</span><span class="kw-meta">ê¸°ì‚¬ 3ê±´</span></div>
    <div class="brief-card" id="card-1" data-a="BA">
      <div class="brief-header">
        <div class="brief-agent-label" id="card-1-label" data-a="BA">â— ë¹„ì¦ˆë‹ˆìŠ¤ ë¶„ì„</div>
        <div class="brief-summary" id="card-1-summary">AI ì¸í”„ë¼ íˆ¬ì í™•ëŒ€ë¡œ ë°˜ë„ì²´ ìˆ˜ìš” êµ¬ì¡°ì  ì„±ì¥ êµ­ë©´ ì§„ì…</div>
      </div>
      <div class="brief-points" id="card-1-points"></div>
      <button class="secret-btn" id="sbtn-1" onclick="toggleSecret(1)">
        <div class="envelope-wrap" id="env-1"></div>
        <div class="secret-text-wrap">
          <span class="secret-title">ë§ì¶¤ ë¸Œë¦¬í•‘ ë„ì°©</span>
          <span class="secret-sub" id="secret-sub-1">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
        </div>
        <span class="secret-chevron">â–¼</span>
      </button>
      <div class="secret-panel" id="s1"><div class="secret-inner" id="si-1"></div></div>
    </div>
    <div class="headlines-card">
      <div class="hl-label">ì˜¤ëŠ˜ì˜ í—¤ë“œë¼ì¸</div>
      <div class="hl-item"><span class="hl-num">01</span><div><div class="hl-title">ì—”ë¹„ë””ì•„ GB300 ê³µê¸‰ í™•ëŒ€â€¦ì‚¼ì„±Â·SKí•˜ì´ë‹‰ìŠ¤ HBM ìˆ˜í˜œ ì „ë§</div><div class="hl-summary">ì°¨ì„¸ëŒ€ GPU ì¶œí•˜ëŸ‰ ì¦ê°€ë¡œ HBM ê³µê¸‰ ê³„ì•½ í™•ëŒ€ ì˜ˆìƒ</div></div></div>
      <div class="hl-item"><span class="hl-num">02</span><div><div class="hl-title">ë¯¸êµ­ AI ë°ì´í„°ì„¼í„° íˆ¬ì 2026ë…„ ì‚¬ìƒ ìµœëŒ€â€¦ë°˜ë„ì²´ ìˆ˜ìš” í­ì¦</div><div class="hl-summary">ë¹…í…Œí¬ íˆ¬ì ì§‘ì¤‘ìœ¼ë¡œ AI ê°€ì†ê¸°Â·ë©”ëª¨ë¦¬ ìˆ˜ìš” ì¦ê°€</div></div></div>
      <div class="hl-item"><span class="hl-num">03</span><div><div class="hl-title">TSMC, 2nm ê³µì • ì–‘ì‚° ê°œì‹œâ€¦íŒŒìš´ë“œë¦¬ ê²½ìŸ ë³¸ê²©í™”</div><div class="hl-summary">ì‚¼ì„±ì „ìì˜ ì¶”ê²© ì „ëµê³¼ ìˆ˜ìœ¨ ê°œì„  ì—¬ë¶€ ì£¼ëª©</div></div></div>
    </div>
  </div>

  <!-- ë¯¸êµ­ì¦ì‹œ -->
  <div class="kw-section" id="kw-2">
    <div class="kw-section-header"><span class="kw-title"># ë¯¸êµ­ì¦ì‹œ</span><span class="kw-meta">ê¸°ì‚¬ 3ê±´</span></div>
    <div class="brief-card" id="card-2" data-a="BA">
      <div class="brief-header">
        <div class="brief-agent-label" id="card-2-label" data-a="BA">â— ë¹„ì¦ˆë‹ˆìŠ¤ ë¶„ì„</div>
        <div class="brief-summary" id="card-2-summary">ì—°ì¤€ ê¸ˆë¦¬ ë™ê²° ê¸°ì¡° ì† ë¹…í…Œí¬ ì¤‘ì‹¬ ìƒìŠ¹ ëª¨ë©˜í…€ ìœ ì§€</div>
      </div>
      <div class="brief-points" id="card-2-points"></div>
      <button class="secret-btn" id="sbtn-2" onclick="toggleSecret(2)">
        <div class="envelope-wrap" id="env-2"></div>
        <div class="secret-text-wrap">
          <span class="secret-title">ë§ì¶¤ ë¸Œë¦¬í•‘ ë„ì°©</span>
          <span class="secret-sub" id="secret-sub-2">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
        </div>
        <span class="secret-chevron">â–¼</span>
      </button>
      <div class="secret-panel" id="s2"><div class="secret-inner" id="si-2"></div></div>
    </div>
    <div class="headlines-card">
      <div class="hl-label">ì˜¤ëŠ˜ì˜ í—¤ë“œë¼ì¸</div>
      <div class="hl-item"><span class="hl-num">01</span><div><div class="hl-title">ë‚˜ìŠ¤ë‹¥ ì—°ê³ ì  ì¬ë„ì „â€¦AI ë ë¦¬ ì§€ì† ì—¬ë¶€ ì£¼ëª©</div><div class="hl-summary">ë¹…í…Œí¬ ì‹¤ì  ì„œí”„ë¼ì´ì¦ˆê°€ ìƒìŠ¹ ë™ë ¥ìœ¼ë¡œ ì‘ìš©</div></div></div>
      <div class="hl-item"><span class="hl-num">02</span><div><div class="hl-title">ì—°ì¤€, ê¸ˆë¦¬ ë™ê²° ìœ ì§€â€¦ì¸í•˜ ì‹œì  ë¶ˆí™•ì‹¤ì„± ì§€ì†</div><div class="hl-summary">íŒŒì›” ì˜ì¥ ë°œì–¸ í›„ ì±„ê¶Œ ìˆ˜ìµë¥  ì†Œí­ ìƒìŠ¹</div></div></div>
      <div class="hl-item"><span class="hl-num">03</span><div><div class="hl-title">ë‹¬ëŸ¬ ê°•ì„¸ ì§€ì†â€¦ì‹ í¥êµ­ ìê¸ˆ ì´íƒˆ ì••ë ¥ í™•ëŒ€</div><div class="hl-summary">ì›/ë‹¬ëŸ¬ í™˜ìœ¨ 1,440ì›ëŒ€, ì™¸êµ­ì¸ ë§¤ë„ ì§€ì†</div></div></div>
    </div>
  </div>

</div>

<button class="fab" onclick="openModal('feedback-modal')">ğŸ’¬ í”¼ë“œë°±</button>

<!-- í‚¤ì›Œë“œ ê´€ë¦¬ ëª¨ë‹¬ -->
<div class="modal-overlay" id="kw-modal" onclick="closeModal('kw-modal',event)">
  <div class="modal">
    <div class="modal-header"><span class="modal-title">í‚¤ì›Œë“œ ê´€ë¦¬</span><button class="modal-close" onclick="closeModal('kw-modal')">âœ•</button></div>
    <div class="modal-notice">â° ë³€ê²½ ì‚¬í•­ì€ ë‚´ì¼ ì˜¤ì „ 9ì‹œ ë¸Œë¦¬í•‘ë¶€í„° ì ìš©ë©ë‹ˆë‹¤.</div>
    <label class="form-label">ë“±ë¡ëœ í‚¤ì›Œë“œ (ìµœëŒ€ 5ê°œ)</label>
    <div class="kw-list">
      <div class="kw-manage-item"><span class="kw-manage-name"># K-ë°”ì´ì˜¤</span><button class="kw-del-btn">âœ•</button></div>
      <div class="kw-manage-item"><span class="kw-manage-name"># AIë°˜ë„ì²´</span><button class="kw-del-btn">âœ•</button></div>
      <div class="kw-manage-item"><span class="kw-manage-name"># ë¯¸êµ­ì¦ì‹œ</span><button class="kw-del-btn">âœ•</button></div>
    </div>
    <label class="form-label">í‚¤ì›Œë“œ ì¶”ê°€</label>
    <div class="kw-add-row">
      <input class="kw-add-input" type="text" placeholder="ìƒˆ í‚¤ì›Œë“œ ì…ë ¥">
      <button class="kw-add-btn">ì¶”ê°€</button>
    </div>
  </div>
</div>

<!-- í”¼ë“œë°± ëª¨ë‹¬ -->
<div class="modal-overlay" id="feedback-modal" onclick="closeModal('feedback-modal',event)">
  <div class="modal">
    <div class="modal-header"><span class="modal-title">ë§Œì¡±ë„ & ê±´ì˜ì‚¬í•­</span><button class="modal-close" onclick="closeModal('feedback-modal')">âœ•</button></div>
    <label class="form-label">ì˜¤ëŠ˜ ë¸Œë¦¬í•‘ì€ ì–´ë– ì…¨ë‚˜ìš”?</label>
    <div class="rating-row">
      <button class="rating-btn" onclick="selectRating(this)">ğŸ˜</button>
      <button class="rating-btn" onclick="selectRating(this)">ğŸ˜</button>
      <button class="rating-btn" onclick="selectRating(this)">ğŸ™‚</button>
      <button class="rating-btn" onclick="selectRating(this)">ğŸ˜Š</button>
      <button class="rating-btn" onclick="selectRating(this)">ğŸ¤©</button>
    </div>
    <label class="form-label">ê±´ì˜ì‚¬í•­ ë˜ëŠ” ê°œì„  ìš”ì²­</label>
    <textarea class="form-textarea" placeholder="ììœ ë¡­ê²Œ ë‚¨ê²¨ì£¼ì„¸ìš”. ì—ì´ì „íŠ¸ ê°œì„ ì— ë°˜ì˜ë©ë‹ˆë‹¤."></textarea>
    <button class="submit-btn">ì œì¶œí•˜ê¸°</button>
  </div>
</div>

<script>
/* â”€â”€ Supabase í´ë¼ì´ì–¸íŠ¸ â”€â”€ */
const sc = supabase.createClient(
  'https://zrlpwmpbrvohautldcon.supabase.co',
  'sb_publishable_nIc584au5zdVZkC7uCe2kg_sEFEMD-G'
);

/* â”€â”€ ì „ì—­ ìœ ì € ìƒíƒœ â”€â”€ */
window.CURRENT_USER = { email: '', userName: '' };

function getUserName() {
  return window.CURRENT_USER.userName || 'ì‚¬ìš©ì';
}

/* â”€â”€ ë´‰íˆ¬ SVG â”€â”€ */
function makeSVG(a) {
  const colors = { BA:'#2563eb', STOCK:'#0891b2', PM:'#7c3aed' };
  const c = colors[a] || '#64748b';
  return `<svg viewBox="0 0 32 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="5" width="30" height="18" rx="2.5" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1.2"/>
    <path class="env-lid" d="M1 7 L16 16 L31 7 L31 5.5 Q31 4 29.5 4 L2.5 4 Q1 4 1 5.5 Z" fill="${c}" opacity="0.9"/>
    <path d="M1 7 L13 15" stroke="${c}" stroke-width="1" stroke-opacity="0.3"/>
    <path d="M31 7 L19 15" stroke="${c}" stroke-width="1" stroke-opacity="0.3"/>
    <circle cx="26" cy="5" r="3.5" fill="#ef4444" stroke="#fff" stroke-width="1.2"/>
    <line x1="10" y1="9" x2="22" y2="9" stroke="#fff" stroke-width="1" stroke-opacity="0.5" stroke-linecap="round"/>
  </svg>`;
}

function renderEnvelopes() {
  [0,1,2].forEach(i => {
    document.getElementById('env-'+i).innerHTML = makeSVG(curAgent);
  });
}

/* â”€â”€ ë¸Œë¦¬í•‘ ì„œë¸Œ í…ìŠ¤íŠ¸ ë Œë” â”€â”€ */
function renderSecretSubs() {
  const name = getUserName();
  [0,1,2].forEach(i => {
    const el = document.getElementById('secret-sub-'+i);
    if (el) el.textContent = `${name}ë‹˜ì„ ìœ„í•´ ì •ë¦¬í–ˆì–´ìš”.`;
  });
}

/* â”€â”€ ë°ì´í„° â”€â”€ */
const DATA = {
  0:{
    BA:    { label:'â— ë¹„ì¦ˆë‹ˆìŠ¤ ë¶„ì„', summary:'CMO ìˆ˜ì£¼Â·ë°”ì´ì˜¤ì‹œë°€ëŸ¬ ê¸€ë¡œë²Œ ì§„ì¶œë¡œ K-ë°”ì´ì˜¤ ì„±ì¥ ëª¨ë©˜í…€ ê°•í™”', points:['ì‚¼ì„±ë°”ì´ì˜¤Â·ì…€íŠ¸ë¦¬ì˜¨, ìœ ëŸ½Â·ë¯¸êµ­ ë™ì‹œ ìˆ˜ì£¼ ë‹¬ì„±ìœ¼ë¡œ ìˆ˜ìµì„± ê°œì„  ì¤‘','ì™¸êµ­ì¸ íˆ¬ì ìœ ì… ì¦ê°€, ê¸€ë¡œë²Œ ê²½ìŸë ¥ ì…ì¦ ë‹¨ê³„ ì§„ì…','ì›ê°€ ì ˆê°Â·ìƒì‚° íš¨ìœ¨í™”ë¡œ ë§ˆì§„ìœ¨ ì§€ì† ê°œì„  ì „ë§','ì¤‘ì¥ê¸° ìˆ˜ì¶œ ì£¼ë ¥ ì‚°ì—… ìë¦¬ì¡ì„ ê°€ëŠ¥ì„± ë†’ìŒ'] },
    STOCK: { label:'â— ì£¼ì‹ ë¸Œë¦¬í•‘',   summary:'ë‹¨ê¸° ì£¼ê°€ ëª¨ë©˜í…€ ìœ íš¨, ë°”ì´ì˜¤ ETF ë¹„ì¤‘ í™•ëŒ€ ì‹œì ', points:['ì…€íŠ¸ë¦¬ì˜¨ FDA ìŠ¹ì¸ í›„ ë‹¨ê¸° ëª¨ë©˜í…€ ìœ íš¨','ì‚¼ì„±ë°”ì´ì˜¤ CMO ìˆ˜ì£¼ í™•ëŒ€ë¡œ EPS ìƒí–¥ ê°€ëŠ¥ì„±','ë°”ì´ì˜¤ ETF ë¹„ì¤‘ í™•ëŒ€ ì‹œì  ê²€í†  ê¶Œì¥','ì„ìƒ ë¦¬ìŠ¤í¬ ë° í™˜ìœ¨ ë³€ë™ì„± ìœ ì˜ í•„ìš”'] },
    PM:    { label:'â— ê¸°íš ë¸Œë¦¬í•‘',   summary:'ë””ì§€í„¸ ë°”ì´ì˜¤ í”Œë«í¼ ì„œë¹„ìŠ¤ ê¸°íš ê¸°íšŒ ì¦ê°€', points:['CMO ê³µì • ê´€ë¦¬ SaaS ìˆ˜ìš” ì¦ê°€ ì˜ˆìƒ','ì„ìƒ ë°ì´í„° ì¶”ì  íˆ´ ì„œë¹„ìŠ¤ ê¸°íš ê¸°íšŒ','ë””ì§€í„¸ í—¬ìŠ¤ì¼€ì–´ ì—°ê³„ ì „ëµ ê²€í† ','ê·œì œ ìƒŒë“œë°•ìŠ¤ í™œìš© ì„œë¹„ìŠ¤ ê¸°íš ìœ íš¨'] }
  },
  1:{
    BA:    { label:'â— ë¹„ì¦ˆë‹ˆìŠ¤ ë¶„ì„', summary:'AI ì¸í”„ë¼ íˆ¬ì í™•ëŒ€ë¡œ ë°˜ë„ì²´ ìˆ˜ìš” êµ¬ì¡°ì  ì„±ì¥ êµ­ë©´ ì§„ì…', points:['HBM ìˆ˜ìš” ê¸‰ì¦, êµ­ë‚´ ì—…ì²´ ASP ê°œì„  ê¸°ëŒ€','TSMC 2nm ì–‘ì‚°ìœ¼ë¡œ íŒŒìš´ë“œë¦¬ ê²½ìŸ ì‹¬í™”','ë¯¸Â·ì¤‘ ê·œì œ ì† í•œêµ­ ê¸°ì—… ë¯¸êµ­ ë™ë§¹ ìˆ˜í˜œ','2026ë…„ ì„¹í„° ì „ì²´ ì‹¤ì  ì „ë…„ ëŒ€ë¹„ ê°œì„  ì „ë§'] },
    STOCK: { label:'â— ì£¼ì‹ ë¸Œë¦¬í•‘',   summary:'HBM3E ì „í™˜ ìˆ˜í˜œ ì§‘ì¤‘, SKí•˜ì´ë‹‰ìŠ¤ ë‹¨ê¸° ëª¨ë©˜í…€ ìœ íš¨', points:['HBM3E ì „í™˜ ìˆ˜í˜œ ì§‘ì¤‘','SKí•˜ì´ë‹‰ìŠ¤ ë‹¨ê¸° ëª¨ë©˜í…€ ìœ íš¨','ë°˜ë„ì²´ ì¥ë¹„ì£¼ ì„ í–‰ ë§¤ìˆ˜ ì „ëµ ê³ ë ¤','ì—”ë¹„ë””ì•„ ê³µê¸‰ë§ ë‚´ ì‚¼ì„± ë¹„ì¤‘ íšŒë³µ ì—¬ë¶€ ëª¨ë‹ˆí„°ë§'] },
    PM:    { label:'â— ê¸°íš ë¸Œë¦¬í•‘',   summary:'AI ì¹© ìˆ˜ìš” ëª¨ë‹ˆí„°ë§ SaaS, ê³µê¸‰ë§ í”Œë«í¼ ê¸°íš ê¸°íšŒ', points:['AI ì¹© ìˆ˜ìš” ëª¨ë‹ˆí„°ë§ SaaS ê¸°íš ê¸°íšŒ','ê³µê¸‰ë§ ê°€ì‹œì„± í”Œë«í¼ ìˆ˜ìš” ì¦ê°€','ë°ì´í„°ì„¼í„° ìš´ì˜ íš¨ìœ¨í™” íˆ´ ìˆ˜ìš” ì¦ê°€ ì˜ˆìƒ','ë°˜ë„ì²´ ì„¤ê³„ ìë™í™” ì—°ê³„ ì„œë¹„ìŠ¤ ê²€í† '] }
  },
  2:{
    BA:    { label:'â— ë¹„ì¦ˆë‹ˆìŠ¤ ë¶„ì„', summary:'ì—°ì¤€ ê¸ˆë¦¬ ë™ê²° ê¸°ì¡° ì† ë¹…í…Œí¬ ì¤‘ì‹¬ ìƒìŠ¹ ëª¨ë©˜í…€ ìœ ì§€', points:['S&P500 ê¸°ìˆ ì£¼ ê°•ì„¸, ë‚˜ìŠ¤ë‹¥ ì—°ê³ ì  ê·¼ì ‘','AI íˆ¬ì ìˆ˜ìš”ê°€ ê¸ˆë¦¬ ë™ê²°ì—ë„ ë²„íŒ€ëª© ì—­í• ','ë‹¬ëŸ¬ ê°•ì„¸ë¡œ ì‹ í¥êµ­ ìê¸ˆ ì´íƒˆ ì••ë ¥ ì¡´ì¬','ì‹¤ì  ì‹œì¦Œ ë§ˆë¬´ë¦¬ í›„ ë§¤í¬ë¡œ ë³€ìˆ˜ ì£¼ëª©'] },
    STOCK: { label:'â— ì£¼ì‹ ë¸Œë¦¬í•‘',   summary:'ë‚˜ìŠ¤ë‹¥ ë‹¨ê¸° ê³¼ì—´ ì‹ í˜¸, ë¶„í•  ë§¤ìˆ˜ ì „ëµ ìœ íš¨', points:['ë‚˜ìŠ¤ë‹¥ ë‹¨ê¸° ê³¼ì—´ ì‹ í˜¸ ì¼ë¶€ ê°ì§€','ë¶„í•  ë§¤ìˆ˜ ì „ëµ ìœ íš¨','ì±„ê¶Œ ìˆ˜ìµë¥  ìƒìŠ¹ ì‹œ ì„±ì¥ì£¼ ë³€ë™ì„± í™•ëŒ€ ìœ ì˜','ë¹…í…Œí¬ ì‹¤ì  ì„œí”„ë¼ì´ì¦ˆ ì§€ì† ì—¬ë¶€ê°€ ë‹¨ê¸° ë°©í–¥ì„± ê²°ì •'] },
    PM:    { label:'â— ê¸°íš ë¸Œë¦¬í•‘',   summary:'ë‹¬ëŸ¬ ê°•ì„¸ë¡œ ë¯¸êµ­ ì‹œì¥ ì§„ì¶œ SaaS ê¸°ì—… ë§¤ì¶œ í™˜ì‚° ìœ ë¦¬', points:['ë‹¬ëŸ¬ ê°•ì„¸ë¡œ ë¯¸êµ­ ì§„ì¶œ ê¸°ì—… ë§¤ì¶œ í™˜ì‚° ìœ ë¦¬','ë¯¸êµ­ í˜„ì§€ ë²•ì¸ ì„¤ë¦½ ê²€í†  ì ì ˆí•œ ì‹œê¸°','í•€í…Œí¬Â·AI ì„œë¹„ìŠ¤ ë¯¸êµ­ ì§„ì¶œ ê¸°íšŒ ì¡´ì¬','ê¸€ë¡œë²Œ ì‹œì¥ ë‹¤ë³€í™” ì „ëµ ê²€í† '] }
  }
};

const AGENT_NAME = { BA:'ë¹„ì¦ˆë‹ˆìŠ¤ ë¶„ì„', STOCK:'ì£¼ì‹ ë¸Œë¦¬í•‘', PM:'ê¸°íš ë¸Œë¦¬í•‘' };
const AGENT_ICON = { BA:'ğŸ“Š', STOCK:'ğŸ“ˆ', PM:'ğŸ¯' };
const KW_NAMES   = ['# K-ë°”ì´ì˜¤','# AIë°˜ë„ì²´','# ë¯¸êµ­ì¦ì‹œ'];
let curAgent = 'BA';
let curDate  = '02.21 ì˜¤ëŠ˜';

const DEEP = {
  BA:{
    0:{h:'K-ë°”ì´ì˜¤, ë‹¨ìˆœ ìˆ˜ì£¼ë¥¼ ë„˜ì–´ ê¸€ë¡œë²Œ ê³µê¸‰ë§ ì¬í¸ì˜ ìˆ˜í˜œìë¡œ',b:'ì‚¼ì„±ë°”ì´ì˜¤Â·ì…€íŠ¸ë¦¬ì˜¨ì˜ ì‡ë”°ë¥¸ ëŒ€í˜• ìˆ˜ì£¼ëŠ” ë‹¨ìˆœ ì‹¤ì  ì´ë²¤íŠ¸ê°€ ì•„ë‹™ë‹ˆë‹¤. ë¯¸Â·ì¤‘ ê°ˆë“±ìœ¼ë¡œ ì¤‘êµ­ CMO ê³µê¸‰ë§ì´ í”ë“¤ë¦¬ëŠ” êµ¬ì¡° ì†ì—ì„œ, í•œêµ­ ë°”ì´ì˜¤ê°€ ì„œë°© ì œì•½ì‚¬ë“¤ì˜ ëŒ€ì²´ íŒŒíŠ¸ë„ˆë¡œ ìë¦¬ë§¤ê¹€í•˜ëŠ” ì¥ê¸° ì „í™˜ì ì…ë‹ˆë‹¤. FDAÂ·EMA ë™ì‹œ ìŠ¹ì¸ ì—­ëŸ‰ì„ ê°–ì¶˜ êµ­ë‚´ ê¸°ì—…ì€ ì „ ì„¸ê³„ì—ì„œ 3~4ê³³ë¿ì´ë¼ëŠ” ì ì´ ê²½ìŸ í•´ìë¥¼ ë”ìš± ê³µê³ íˆ í•©ë‹ˆë‹¤.'},
    1:{h:'AIë°˜ë„ì²´, ìˆ˜ìš” í­ì¦ì€ ë§ì§€ë§Œ ìˆ˜ìµ ê·€ì† êµ¬ì¡°ë¥¼ ë´ì•¼ í•©ë‹ˆë‹¤',b:'HBMÂ·íŒŒìš´ë“œë¦¬ ìˆ˜ìš” ê¸‰ì¦ì˜ ìˆ˜í˜œëŠ” ì‹¤ì œë¡œ ì—”ë¹„ë””ì•„ì™€ TSMCì— ì§‘ì¤‘ë©ë‹ˆë‹¤. êµ­ë‚´ ë©”ëª¨ë¦¬ ê¸°ì—…ì€ ê³µê¸‰ì ìœ„ì¹˜ì— ë¨¸ë¬¼ëŸ¬ ìˆì–´ ASP í˜‘ìƒë ¥ì´ ì œí•œì ì…ë‹ˆë‹¤. ì§„ì§œ ê¸°íšŒëŠ” AI ê°€ì†ê¸° ì„¤ê³„ ë‚´ì¬í™”(NPU)ì™€ ì˜¨ë””ë°”ì´ìŠ¤ AI ì¹© ì‹œì¥ì´ë©°, ì´ ë‘ ë¶„ì•¼ì—ì„œ êµ­ë‚´ íŒ¹ë¦¬ìŠ¤ ìƒíƒœê³„ê°€ ì–´ë–»ê²Œ ìë¦¬ë¥¼ ì¡ëŠëƒê°€ ì¤‘ê¸° ë¹„ì¦ˆë‹ˆìŠ¤ êµ¬ì¡°ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.'},
    2:{h:'ë¯¸êµ­ ì¦ì‹œ ê°•ì„¸, í•œêµ­ ê¸°ì—…ì˜ ì‹œì¥ ì§„ì… íƒ€ì´ë° ê´€ì ì—ì„œ ì½ì–´ì•¼ í•©ë‹ˆë‹¤',b:'ë‹¬ëŸ¬ ê°•ì„¸ì™€ ë¯¸êµ­ ë¹…í…Œí¬ ì¤‘ì‹¬ ìƒìŠ¹ì€ ì—­ì„¤ì ìœ¼ë¡œ í•œêµ­ SaaSÂ·AI ìŠ¤íƒ€íŠ¸ì—…ì—ê²Œ ë¯¸êµ­ ë²•ì¸ ì„¤ë¦½ ë° í˜„ì§€ ë§¤ì¶œ ì „í™˜ì˜ ìµœì  êµ¬ê°„ì…ë‹ˆë‹¤. ì›í™” ê°€ì¹˜ í•˜ë½ìœ¼ë¡œ ì¸ê±´ë¹„ ê²½ìŸë ¥ì´ ì˜¬ë¼ê°„ ì§€ê¸ˆ, ë¯¸êµ­ ê³ ê°ì„ í™•ë³´í•˜ë©´ ë‹¬ëŸ¬ ë§¤ì¶œì´ ìë™ìœ¼ë¡œ í™˜ì°¨ìµì„ í¬í•¨í•©ë‹ˆë‹¤. ë‹¨, ì—°ì¤€ ë™ê²° ì¥ê¸°í™”ëŠ” ì„±ì¥ì£¼ ë°¸ë¥˜ì—ì´ì…˜ ì••ì¶• ë¦¬ìŠ¤í¬ë¥¼ ë‚´í¬í•´ IPO íƒ€ì´ë° ì„¤ê³„ ì‹œ ìœ ì˜í•´ì•¼ í•©ë‹ˆë‹¤.'}
  },
  STOCK:{
    0:{h:'ì…€íŠ¸ë¦¬ì˜¨Â·ì‚¼ì„±ë°”ì´ì˜¤, ì§€ê¸ˆ ë§¤ìˆ˜í•´ì•¼ í•˜ëŠ” ì´ìœ ì™€ ì£¼ì˜í•´ì•¼ í•  í•œ ê°€ì§€',b:'FDA ìµœì¢… ìŠ¹ì¸ ì´í›„ ì£¼ê°€ ëª¨ë©˜í…€ì€ í†µìƒ 3~6ê°œì›” ìœ íš¨í•©ë‹ˆë‹¤. ì…€íŠ¸ë¦¬ì˜¨ì€ ë¯¸êµ­ ì‹œì¥ ì¹¨íˆ¬ìœ¨ì´ ì‹¤ì œ ë§¤ì¶œë¡œ ì „í™˜ë˜ëŠ” Q2~Q3 ì‹¤ì  í™•ì¸ ì „ê¹Œì§€ ë‹¨ê¸° íŠ¸ë ˆì´ë”© ê´€ì ì´ ì í•©í•©ë‹ˆë‹¤. ì‚¼ì„±ë°”ì´ì˜¤ëŠ” CMO ìˆ˜ì£¼ ì”ê³ ê°€ ì¤‘ê¸° ê°€ì‹œì„±ì„ ì œê³µí•˜ì§€ë§Œ, ì›/ë‹¬ëŸ¬ 1,380ì› ì´í•˜ í•˜ë½ ì‹œ EPSì— ë¶€ì •ì  ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆì–´ í™˜ìœ¨ ëª¨ë‹ˆí„°ë§ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.'},
    1:{h:'HBM ìˆ˜í˜œì£¼, ì„ ë„ ë§¤ìˆ˜ íƒ€ì´ë°ì€ ì§€ë‚¬ìŠµë‹ˆë‹¤â€”ë‹¤ìŒ ì‚¬ì´í´ì„ ë´ì•¼ í•©ë‹ˆë‹¤',b:'SKí•˜ì´ë‹‰ìŠ¤ì˜ HBM3E ìˆ˜í˜œëŠ” ì´ë¯¸ ì£¼ê°€ì— ìƒë‹¹ ë¶€ë¶„ ë°˜ì˜ëìŠµë‹ˆë‹¤. ì§€ê¸ˆ ì‹œì  ì§„ì…ì€ HBM4 ì „í™˜ ë°œí‘œ(2025 H2 ì˜ˆìƒ)ê¹Œì§€ì˜ ê³µë°±ê¸° ë¦¬ìŠ¤í¬ë¥¼ ê°ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤. ì˜¤íˆë ¤ ì¥ë¹„ì£¼(í•œë¯¸ë°˜ë„ì²´, ì´ì˜¤í…Œí¬ë‹‰ìŠ¤)ê°€ ì„ í–‰ ìˆ˜í˜œ ê¸°íšŒë¥¼ ì œê³µí•©ë‹ˆë‹¤. AI ì„œë²„ ì¦ì„¤ ì‚¬ì´í´ì´ 2026ë…„ê¹Œì§€ ì§€ì†ëœë‹¤ë©´, ì¥ë¹„ ìˆ˜ì£¼ ì”ê³ ê°€ ìŒ“ì´ëŠ” Q3ë¶€í„°ê°€ ì§„ì… ì‹œì ì…ë‹ˆë‹¤.'},
    2:{h:'ë‚˜ìŠ¤ë‹¥ ê³¼ì—´ ì‹ í˜¸, ìˆì€ ì•„ì§â€”ì¡°ì • êµ¬ê°„ì˜ ì„¹í„° ë¡œí…Œì´ì…˜ì´ í•µì‹¬ì…ë‹ˆë‹¤',b:'ë‚˜ìŠ¤ë‹¥ RSI 70 ê·¼ì ‘ê³¼ ë°¸ë¥˜ì—ì´ì…˜ ë¶€ë‹´ì€ ëª…í™•í•˜ì§€ë§Œ, ì—°ì¤€ ë™ê²° ê¸°ì¡°ê°€ ìœ ì§€ë˜ëŠ” í•œ í•˜ë½ íŠ¸ë¦¬ê±°ê°€ ì œí•œì ì…ë‹ˆë‹¤. ê¸°ìˆ ì£¼ ë¹„ì¤‘ì„ ì¤„ì´ê³  ì—ë„ˆì§€Â·ì†Œì¬ ë“± ë§¤í¬ë¡œ ìˆ˜í˜œ ì„¹í„°ë¡œ ë¶€ë¶„ ì´ë™í•˜ëŠ” ì „ëµì´ ìœ íš¨í•©ë‹ˆë‹¤. í•œêµ­ íˆ¬ììëŠ” ì›/ë‹¬ëŸ¬ í—¤ì§€ ì—¬ë¶€ì— ë”°ë¼ ë‚˜ìŠ¤ë‹¥ ETF ì‹¤ì§ˆ ìˆ˜ìµë¥ ì´ í¬ê²Œ ë‹¬ë¼ì§€ë¯€ë¡œ, í™˜í—¤ì§€í˜• ìƒí’ˆ ë¹„ì¤‘ ì¡°ì ˆì„ ë¨¼ì € ê²€í† í•´ì•¼ í•©ë‹ˆë‹¤.'}
  },
  PM:{
    0:{h:'K-ë°”ì´ì˜¤ ì„±ì¥ì´ ë§Œë“œëŠ” SaaS ê¸°íšŒ, ì§€ê¸ˆ ê¸°íší•´ì•¼ í•  ì´ìœ ',b:'CMO ìˆ˜ì£¼ê°€ ëŠ˜ìˆ˜ë¡ ë°°ì¹˜ ì¶”ì , í’ˆì§ˆ ë¬¸ì„œí™”, ê·œì œ ì œì¶œ ìë™í™” ìˆ˜ìš”ê°€ í­ë°œì ìœ¼ë¡œ ì¦ê°€í•©ë‹ˆë‹¤. ê¸€ë¡œë²Œ ë°”ì´ì˜¤ CMO íŠ¹í™” SaaSëŠ” ê³µê¸‰ì´ ê·¹ë„ë¡œ ë¶€ì¡±í•œ ë¸”ë£¨ì˜¤ì…˜ì…ë‹ˆë‹¤. FDA 21 CFR Part 11 ì¤€ìˆ˜ ê¸°ëŠ¥ì„ ë‚´ì¬í™”í•œ êµ­ë‚´ í”Œë«í¼ì´ë¼ë©´, êµ­ë‚´ CMO ë ˆí¼ëŸ°ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê¸€ë¡œë²Œ ì§„ì¶œê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ˆê¸° MVPëŠ” ë°°ì¹˜ ê¸°ë¡ ë””ì§€í„¸í™” í•˜ë‚˜ì˜ ê¸°ëŠ¥ìœ¼ë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤.'},
    1:{h:'AIë°˜ë„ì²´ ê³µê¸‰ë§ ê°€ì‹œì„±, ì´ê²ƒì´ ë§Œë“¤ì–´ì•¼ í•  ì œí’ˆì…ë‹ˆë‹¤',b:'ë°˜ë„ì²´ ê³µê¸‰ë§ì€ ì—¬ì „íˆ ì—‘ì…€ê³¼ ì´ë©”ì¼ë¡œ ê´€ë¦¬ë©ë‹ˆë‹¤. HBMÂ·íŒŒìš´ë“œë¦¬ ìˆ˜ê¸‰ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ ì§‘ê³„í•´ ì˜ì‚¬ê²°ì • ì¸í…”ë¦¬ì „ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” B2B SaaSëŠ” êµ¬ë§¤ ë‹´ë‹¹ìÂ·SCM íŒ€ ëª¨ë‘ì—ê²Œ ì ˆì‹¤í•©ë‹ˆë‹¤. êµ¬ë… ACV $50K~200K ìˆ˜ì¤€ì˜ ì—”í„°í”„ë¼ì´ì¦ˆ ê³„ì•½ì´ ê°€ëŠ¥í•œ ì‹œì¥ìœ¼ë¡œ, ì´ˆê¸° íŒŒì¼ëŸ¿ì€ ë°˜ë„ì²´ ì¤‘ê°„ ìœ í†µìƒì´ë‚˜ EMS ê¸°ì—…ì„ íƒ€ê¹ƒìœ¼ë¡œ ë¹ ë¥´ê²Œ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
    2:{h:'ë‹¬ëŸ¬ ê°•ì„¸ ì§€ê¸ˆ, ë¯¸êµ­ ì‹œì¥ ì§„ì… ì œí’ˆì˜ í¬ì§€ì…”ë‹ì„ ì¬ì„¤ê³„í•´ì•¼ í•©ë‹ˆë‹¤',b:'ë‹¬ëŸ¬ ê°•ì„¸ êµ¬ê°„ì€ í•œêµ­ íŒ€ì˜ ë²ˆì¸ ë ˆì´íŠ¸ë¥¼ ë‹¬ëŸ¬ í™˜ì‚°ìœ¼ë¡œ ë‚®ì¶°ì¤ë‹ˆë‹¤. ê°™ì€ ì›í™” ë¹„ìš©ìœ¼ë¡œ ë” ì˜¤ë˜ ë¯¸êµ­ ì‹œì¥ì„ ì‹¤í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ êµ¬ê°„ì— í•´ì•¼ í•  ê²ƒì€ ì œí’ˆ í˜„ì§€í™”(ì˜ë¬¸ UX, ë¯¸êµ­ ê²°ì œ ì¸í”„ë¼, SOC 2 ì¤€ë¹„)ì™€ ë¯¸êµ­ íŒŒíŠ¸ë„ˆÂ·ì±„ë„ êµ¬ì¶•ì…ë‹ˆë‹¤. ì—°ì¤€ ë™ê²° ì¥ê¸°í™”ë¡œ ë¯¸êµ­ ìŠ¤íƒ€íŠ¸ì—… íˆ¬ì ì‹¬ë¦¬ê°€ ìœ„ì¶•ëœ ë§Œí¼ B2B SaaSë¡œ ë¹ ë¥¸ ìˆ˜ìµí™”ë¥¼ ì„¤ê³„í•˜ëŠ” ê²ƒì´ í˜„ í™˜ê²½ì— ìµœì ì…ë‹ˆë‹¤.'}
  }
};

/* â”€â”€ ì¹´ë“œ ì—…ë°ì´íŠ¸ â”€â”€ */
function updateCard(i, key) {
  const d = DATA[i][key];
  const card = document.getElementById('card-'+i);
  const lbl  = document.getElementById('card-'+i+'-label');
  const sum  = document.getElementById('card-'+i+'-summary');
  const pts  = document.getElementById('card-'+i+'-points');
  card.setAttribute('data-a', key);
  lbl.setAttribute('data-a', key);
  lbl.textContent = d.label;
  sum.textContent = d.summary;
  pts.innerHTML = d.points.map(p =>
    `<div class="brief-point"><div class="brief-dot" data-a="${key}"></div><div class="brief-text">${p}</div></div>`
  ).join('');
  card.style.animation='none'; card.offsetHeight; card.style.animation='fadeUp .2s ease';
}

function renderDeep(i) {
  const dp = DEEP[curAgent][i];
  document.getElementById('si-'+i).innerHTML = `
    <div class="secret-agent-header">
      <span class="secret-agent-badge" data-a="${curAgent}">${AGENT_ICON[curAgent]} ${AGENT_NAME[curAgent]}</span>
      <span class="secret-agent-sub">ì‹¬ì¸µ ë¶„ì„</span>
    </div>
    <div>
      <div class="s-headline">${dp.h}</div>
      <div class="s-text">${dp.b}</div>
    </div>
  `;
}

/* â”€â”€ ì—ì´ì „íŠ¸ ì„ íƒ â”€â”€ */
function selectAgent(key, label, el) {
  curAgent = key;
  document.querySelectorAll('.agent-chip').forEach(c => c.classList.remove('active'));
  el.classList.add('active');
  const chip = document.getElementById('chip-agent');
  chip.setAttribute('data-a', key);
  document.getElementById('chip-agent-txt').textContent = label;
  document.querySelectorAll('#dd-agent .c-dd-item').forEach((it,idx) => {
    it.classList.toggle('active', ['BA','STOCK','PM'][idx] === key);
  });
  [0,1,2].forEach(i => { updateCard(i, key); renderDeep(i); });
  renderEnvelopes();
}

function selectAgentDD(key, label, e) {
  e.stopPropagation();
  closeAllDD();
  selectAgent(key, label, document.querySelector(`.agent-chip[data-a="${key}"]`));
}

/* â”€â”€ ë‚ ì§œ ì„ íƒ â”€â”€ */
function selectDate(val, e) {
  e.stopPropagation();
  closeAllDD();
  curDate = val;
  document.getElementById('chip-date-txt').textContent = val;
  document.querySelectorAll('#dd-date .c-dd-item').forEach(it =>
    it.classList.toggle('active', it.textContent.trim() === val)
  );
  document.querySelectorAll('.date-chip').forEach(c =>
    c.classList.toggle('active', c.textContent.trim() === val)
  );
}

/* â”€â”€ í‚¤ì›Œë“œ DD â”€â”€ */
function jumpKwDD(i, e) {
  e.stopPropagation();
  closeAllDD();
  document.getElementById('chip-kw-txt').textContent = KW_NAMES[i];
  document.querySelectorAll('#dd-kw .c-dd-item').forEach((it,j) => it.classList.toggle('active', j===i));
  scrollToKw('kw-'+i, document.getElementById('nav-kw-'+i));
}

/* â”€â”€ ë“œë¡­ë‹¤ìš´ â”€â”€ */
function toggleDD(id, e) {
  e.stopPropagation();
  const el = document.getElementById(id);
  const isOpen = el.classList.contains('open');
  closeAllDD();
  if (!isOpen) el.classList.add('open');
}
function closeAllDD() {
  document.querySelectorAll('.c-dropdown').forEach(d => d.classList.remove('open'));
}
document.addEventListener('click', closeAllDD);

/* â”€â”€ ì ‘ê¸° â”€â”€ */
function toggleTopBar() {
  const bar  = document.getElementById('topBar');
  const btn  = document.getElementById('collapseBtn');
  const cBar = document.getElementById('collapsedBar');
  bar.classList.toggle('collapsed');
  const c = bar.classList.contains('collapsed');
  btn.textContent = c ? 'í¼ì¹˜ê¸° â–¼' : 'ì ‘ê¸° â–²';
  cBar.classList.toggle('hidden', !c);
}

/* â”€â”€ í‚¤ì›Œë“œ ìŠ¤í¬ë¡¤ â”€â”€ */
function scrollToKw(id, el) {
  document.querySelectorAll('.kw-chip').forEach(c => c.classList.remove('active'));
  el.classList.add('active');
  const target = document.getElementById(id);
  const offset = document.getElementById('topBar').offsetHeight + 12;
  window.scrollTo({ top: target.getBoundingClientRect().top + window.scrollY - offset, behavior:'smooth' });
}

/* â”€â”€ ìŠ¤í¬ë¡¤ ê°ì§€ â”€â”€ */
const sections = [0,1,2].map(i => document.getElementById('kw-'+i));
window.addEventListener('scroll', () => {
  const topH = document.getElementById('topBar').offsetHeight;
  let active = 0;
  sections.forEach((s,i) => { if (s.getBoundingClientRect().top <= topH + 40) active = i; });
  document.querySelectorAll('.kw-chip').forEach((c,i) => c.classList.toggle('active', i===active));
  document.getElementById('chip-kw-txt').textContent = KW_NAMES[active];
  document.querySelectorAll('#dd-kw .c-dd-item').forEach((it,j) => it.classList.toggle('active', j===active));
}, { passive:true });

/* â”€â”€ ì‹œí¬ë¦¿ í† ê¸€ â”€â”€ */
function toggleSecret(i) {
  document.getElementById('s'+i).classList.toggle('open');
  document.getElementById('sbtn-'+i).classList.toggle('open');
}

/* â”€â”€ ëª¨ë‹¬ â”€â”€ */
function openModal(id) { document.getElementById(id).classList.add('open'); }
function closeModal(id, e) {
  if (!e || e.target.classList.contains('modal-overlay'))
    document.getElementById(id).classList.remove('open');
}
function selectRating(el) {
  document.querySelectorAll('.rating-btn').forEach(b => b.classList.remove('selected'));
  el.classList.add('selected');
}

/* â”€â”€ ì´ˆê¸°í™” (Supabase ì„¸ì…˜ ê¸°ë°˜) â”€â”€ */
async function init() {
  try {
    const { data: { session } } = await sc.auth.getSession();

    if (!session) {
      // ë¹„ë¡œê·¸ì¸ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
      location.href = 'index.html';
      return;
    }

    // ì´ë©”ì¼ì—ì„œ @ ì• ë¶€ë¶„ ì¶”ì¶œí•´ ì „ì—­ ì €ì¥
    const email    = session.user.email;           // ex) positivecha@gmail.com
    const userName = email.split('@')[0];           // ex) positivecha
    window.CURRENT_USER = { email, userName };

  } catch (err) {
    // ì„¸ì…˜ ì¡°íšŒ ì‹¤íŒ¨ ì‹œ í´ë°± (ë¡œì»¬ ê°œë°œ ë“±)
    console.warn('ì„¸ì…˜ ì¡°íšŒ ì‹¤íŒ¨, í´ë°± ì ìš©:', err);
    window.CURRENT_USER = { email: '', userName: 'ì‚¬ìš©ì' };
  }

  // ë Œë”
  [0,1,2].forEach(i => { updateCard(i, 'BA'); renderDeep(i); });
  renderEnvelopes();
  renderSecretSubs();
}

init();
</script>
</body>
</html>
