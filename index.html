<style>
    .role-selector { background: #f0f4f8; padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center; }
    .btn-role { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 0 5px; }
    .btn-active { background: #007bff; color: white; font-weight: bold; }
    .news-link { font-size: 0.8em; color: #007bff; text-decoration: none; margin-left: 10px; }
</style>

<div class="container">
    <header>
        <h1>Fitz Intelligence <small>v3.0</small></h1>
        <div class="role-selector">
            <p><strong>내 직군 선택:</strong></p>
            <button id="btn-pm" class="btn-role btn-active" onclick="setRole('PM')">PM (기획/동향)</button>
            <button id="btn-ba" class="btn-role" onclick="setRole('BA')">BA (수익/사업)</button>
        </div>
    </header>

    <div id="briefing-section" class="briefing-card">
        <h3>오늘의 AI 전략 브리핑</h3>
        <p id="ai-briefing">데이터를 불러오는 중...</p>
    </div>

    <div id="news-container"></div>
</div>

<script>
    let currentRole = 'PM'; // 기본값 PM
    let newsData = [];

    function setRole(role) {
        currentRole = role;
        document.querySelectorAll('.btn-role').forEach(btn => btn.classList.remove('btn-active'));
        document.getElementById(`btn-${role.toLowerCase()}`).classList.add('btn-active');
        renderData(); // 직군 변경 시 즉시 다시 그리기
    }

    async function loadData() {
        const res = await fetch('data.json');
        newsData = await res.json();
        renderData();
    }

    function renderData() {
        const latest = newsData[0];
        // 직군별 브리핑 출력
        document.getElementById('ai-briefing').innerText = latest[`${currentRole.toLowerCase()}_brief`];

        const container = document.getElementById('news-container');
        container.innerHTML = latest.articles.map(article => `
            <div class="card">
                <div class="keyword-tag">${article.keyword}</div>
                <h4>
                    ${article.title}
                    <a href="${article.url}" target="_blank" class="news-link">[원문보기]</a> </h4>
                <p>${currentRole === 'PM' ? article.pm_summary : article.ba_summary}</p>
            </div>
        `).join('');
    }
    loadData();
</script>
