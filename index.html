<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fitz Intelligence | ì›¹ ì½˜í…ì¸  AI ë¶„ì„ í”Œë«í¼</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
<style>
*{box-sizing:border-box;margin:0;padding:0;}
:root{--primary:#4f46e5;--g50:#f9fafb;--g100:#f3f4f6;--g200:#e5e7eb;--g600:#4b5563;--g900:#111827;}
body{font-family:'Pretendard',sans-serif;background:#fff;color:var(--g900);-webkit-tap-highlight-color:transparent;}

.nav{position:sticky;top:0;z-index:100;background:rgba(255,255,255,.92);backdrop-filter:blur(12px);border-bottom:1px solid var(--g200);display:flex;align-items:center;justify-content:space-between;padding:0 20px;height:56px;}
.nav-logo{font-size:.95rem;font-weight:800;letter-spacing:-.5px;cursor:pointer;}
.nav-links{display:flex;gap:8px;align-items:center;}
.btn-how{font-size:.8rem;font-weight:700;color:var(--g600);padding:7px 14px;border-radius:20px;cursor:pointer;border:1.5px solid var(--g200);background:#fff;font-family:inherit;transition:.15s;}
.btn-how:hover{background:var(--g100);}
.btn-cta-sm{background:var(--g900);color:#fff;border:none;padding:7px 16px;border-radius:20px;font-size:.8rem;font-weight:700;cursor:pointer;font-family:inherit;}

.hero{text-align:center;padding:64px 20px 56px;background:linear-gradient(180deg,#fff 0%,var(--g50) 100%);}
.hero-badge{display:inline-block;background:#eef2ff;color:var(--primary);font-size:.72rem;font-weight:700;padding:4px 14px;border-radius:20px;letter-spacing:.5px;margin-bottom:18px;}
.hero h1{font-size:clamp(2rem,8vw,3.4rem);font-weight:800;letter-spacing:-2px;line-height:1.1;margin-bottom:14px;}
.hero p{font-size:clamp(.9rem,3vw,1.15rem);color:var(--g600);margin-bottom:36px;line-height:1.7;}
.hero-btns{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;}
.btn-main{padding:16px 36px;border-radius:50px;background:var(--primary);color:#fff;border:none;font-weight:800;cursor:pointer;font-size:1rem;font-family:inherit;box-shadow:0 8px 24px rgba(79,70,229,.25);transition:.2s;}
.btn-main:hover{background:#4338ca;}
#bulb{display:inline-block;animation:bulb 1.8s ease-in-out infinite;transform-origin:center bottom;cursor:default;}
@keyframes bulb{0%,100%{filter:brightness(1);transform:scale(1);}40%{filter:brightness(1.6) drop-shadow(0 0 8px #fde68a);transform:scale(1.15);}60%{filter:brightness(1.2) drop-shadow(0 0 4px #fcd34d);transform:scale(1.08);}}
.btn-sub{padding:16px 28px;border-radius:50px;background:#fff;color:var(--g900);border:1.5px solid var(--g200);font-weight:700;cursor:pointer;font-size:1rem;font-family:inherit;}

.section{padding:56px 20px;max-width:800px;margin:0 auto;}
.section-label{font-size:.72rem;font-weight:700;color:var(--primary);letter-spacing:2px;text-align:center;margin-bottom:10px;}
.section-title{font-size:clamp(1.3rem,5vw,1.9rem);font-weight:800;text-align:center;letter-spacing:-.5px;margin-bottom:40px;}

.steps{display:flex;flex-direction:column;gap:0;}
.step{display:flex;gap:20px;align-items:flex-start;padding:24px 0;border-bottom:1px solid var(--g100);}
.step:last-child{border-bottom:none;}
.step-num{flex-shrink:0;width:44px;height:44px;border-radius:12px;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.85rem;}
.step-body{flex:1;}
.step-body h3{font-size:1rem;font-weight:800;margin-bottom:6px;}
.step-body p{font-size:.85rem;color:var(--g600);line-height:1.7;margin-bottom:10px;}
.step-tags{display:flex;flex-wrap:wrap;gap:6px;}
.step-tag{background:var(--g100);color:var(--g600);padding:3px 10px;border-radius:18px;font-size:.74rem;font-weight:700;}
.step-tag.blue{background:#eef2ff;color:var(--primary);}

.viz-section{background:var(--g900);padding:56px 20px;}
.viz-inner{max-width:800px;margin:0 auto;}
.viz-section .section-label{color:#a5b4fc;}
.viz-section .section-title{color:#fff;}
.agent-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;}
@media(min-width:600px){.agent-grid{grid-template-columns:repeat(4,1fr);}}
.agent-card{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:14px;padding:16px 14px;}
.agent-icon{font-size:1.4rem;margin-bottom:8px;}
.agent-name{font-size:.72rem;font-weight:700;color:#a5b4fc;letter-spacing:.5px;margin-bottom:4px;}
.agent-desc{font-size:.78rem;color:rgba(255,255,255,.6);line-height:1.5;margin-bottom:12px;}
.agent-bar-wrap{height:4px;background:rgba(255,255,255,.1);border-radius:4px;overflow:hidden;}
.agent-bar{height:100%;border-radius:4px;background:linear-gradient(90deg,#818cf8,#a5b4fc);}

.preview-section{padding:56px 20px;background:var(--g50);}
.preview-inner{max-width:800px;margin:0 auto;}
.preview-card{background:#fff;border-radius:18px;border:1px solid var(--g200);overflow:hidden;box-shadow:0 4px 24px rgba(0,0,0,.06);}
.preview-header{background:var(--g900);padding:18px 20px;display:flex;align-items:center;gap:10px;}
.preview-dots{display:flex;gap:6px;}
.preview-dot{width:10px;height:10px;border-radius:50%;}
.preview-title{color:rgba(255,255,255,.5);font-size:.78rem;font-weight:600;}
.preview-body{padding:20px;}
.preview-kw-row{display:flex;gap:7px;flex-wrap:wrap;margin-bottom:16px;}
.preview-kw{background:#eef2ff;color:var(--primary);padding:4px 12px;border-radius:18px;font-size:.76rem;font-weight:700;}
.preview-briefing{background:var(--g900);border-radius:12px;padding:18px;margin-bottom:14px;}
.preview-briefing-label{font-size:.7rem;font-weight:700;color:#a5b4fc;margin-bottom:8px;}
.preview-briefing-lines{display:flex;flex-direction:column;gap:7px;}
.preview-line{height:10px;background:rgba(255,255,255,.15);border-radius:4px;}
.preview-news{display:flex;flex-direction:column;gap:8px;}
.preview-news-item{background:var(--g50);border:1px solid var(--g200);border-radius:10px;padding:12px 14px;display:flex;gap:10px;align-items:flex-start;}
.preview-news-dot{flex-shrink:0;width:8px;height:8px;border-radius:50%;background:var(--primary);margin-top:5px;}
.preview-news-lines{flex:1;display:flex;flex-direction:column;gap:5px;}
.preview-news-line-t{height:10px;border-radius:4px;background:var(--g200);}
.preview-news-line-s{height:8px;border-radius:4px;background:var(--g100);width:70%;}

.cta-section{padding:72px 20px;text-align:center;}
.cta-section h2{font-size:clamp(1.4rem,5vw,2.2rem);font-weight:800;letter-spacing:-.5px;margin-bottom:12px;}
.cta-section p{color:var(--g600);font-size:.9rem;margin-bottom:32px;}

footer{border-top:1px solid var(--g200);padding:24px 20px;text-align:center;font-size:.75rem;color:var(--g600);}

/* â”€â”€ AUTH ì˜¤ë²„ë ˆì´ â”€â”€ */
#auth-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:9999;backdrop-filter:blur(8px);padding:20px;}
.auth-modal{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:36px 28px;border-radius:24px;width:90%;max-width:380px;}
.auth-modal h2{font-size:1.3rem;font-weight:800;margin-bottom:6px;}
.auth-modal-sub{font-size:.82rem;color:var(--g600);margin-bottom:20px;}
.auth-input{width:100%;padding:13px 16px;border-radius:10px;border:1.5px solid var(--g200);font-size:.9rem;font-family:inherit;margin-bottom:12px;outline:none;}
.auth-input:focus{border-color:var(--primary);}
.auth-submit{width:100%;padding:14px;border-radius:12px;background:var(--primary);color:#fff;border:none;font-weight:800;font-size:.95rem;cursor:pointer;font-family:inherit;transition:.15s;}
.auth-submit:disabled{background:#9ca3af;cursor:default;}
.auth-close{margin-top:14px;font-size:.78rem;color:var(--g600);cursor:pointer;text-align:center;}

/* â”€â”€ ê°€ì… ì œí•œ ë·° â”€â”€ */
.waitlist-view{text-align:center;padding:8px 0;}
.waitlist-icon{font-size:3rem;margin-bottom:14px;}
.waitlist-title{font-size:1.05rem;font-weight:800;color:var(--g900);margin-bottom:10px;}
.waitlist-msg{font-size:.88rem;color:var(--g600);line-height:1.7;margin-bottom:22px;background:var(--g50);border:1px solid var(--g200);border-radius:12px;padding:14px 16px;text-align:left;}
.waitlist-input-wrap{display:flex;flex-direction:column;gap:10px;}
.waitlist-submit{width:100%;padding:14px;border-radius:12px;background:#111;color:#fff;border:none;font-weight:800;font-size:.9rem;cursor:pointer;font-family:inherit;transition:.15s;}
.waitlist-submit:disabled{background:#9ca3af;cursor:default;}
.waitlist-done{background:#f0fdf4;border:1px solid #bbf7d0;border-radius:12px;padding:16px;text-align:center;font-size:.88rem;color:#065f46;font-weight:600;margin-top:4px;}
</style>
</head>
<body>

<nav class="nav">
  <span class="nav-logo">Fitz Intelligence</span>
  <div class="nav-links">
    <button class="btn-how" onclick="scrollTo({top:document.getElementById('how').offsetTop-60,behavior:'smooth'})">ì´ìš©ë°©ë²• ë³´ê¸°</button>
    <button class="btn-cta-sm" id="nav-cta" onclick="handleStart()">ë¬´ë£Œë¡œ ì‹œì‘í•˜ê¸°</button>
  </div>
</nav>

<section class="hero">
  <div class="hero-badge">PROFESSIONAL AI INTELLIGENCE</div>
  <h1>ì˜¤ëŠ˜ ê¼­ ì•Œì•„ì•¼ í•  ì†Œì‹<span id="bulb">ğŸ’¡</span><br>AIê°€ ë¨¼ì € ì½ì–´ë“œë ¤ìš”</h1>
  <p>ê´€ì‹¬ í‚¤ì›Œë“œë§Œ ë“±ë¡í•˜ë©´<br>AI ì—ì´ì „íŠ¸ 8ëª…ì´ ë§¤ì¼ ë¶„ì„í•´ ì´ë©”ì¼ë¡œ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤</p>
  <div class="hero-btns">
    <button class="btn-main" id="main-cta" onclick="handleStart()">ë¬´ë£Œë¡œ ì‹œì‘í•˜ê¸° â†’</button>
  </div>
</section>

<div class="section" id="how">
  <div class="section-label">HOW IT WORKS</div>
  <div class="section-title">3ë‹¨ê³„ë¡œ ëë‚©ë‹ˆë‹¤</div>
  <div class="steps">
    <div class="step">
      <div class="step-num">01</div>
      <div class="step-body">
        <h3>ê´€ì‹¬ í‚¤ì›Œë“œ ë“±ë¡</h3>
        <p>ê¸°ì—…ëª…, ì‚°ì—…, ê¸°ìˆ  í‚¤ì›Œë“œë¥¼ ìµœëŒ€ 5ê°œ ì…ë ¥í•˜ì„¸ìš”.<br>ê°€ì… í›„ 1ë¶„ ì•ˆì— ì™„ë£Œë©ë‹ˆë‹¤.</p>
        <div class="step-tags">
          <span class="step-tag blue">#ì´ì»¤ë¨¸ìŠ¤</span>
          <span class="step-tag blue">#ììœ¨ì£¼í–‰</span>
          <span class="step-tag blue">#AIë°˜ë„ì²´</span>
          <span class="step-tag blue">#í…ŒìŠ¬ë¼</span>
        </div>
      </div>
    </div>
    <div class="step">
      <div class="step-num">02</div>
      <div class="step-body">
        <h3>AI ì—ì´ì „íŠ¸ 8ëª…ì´ ë¶„ì„</h3>
        <p>í‚¤ì›Œë“œ ê´€ë ¨ <b>ë‰´ìŠ¤Â·ìœ íŠœë¸Œ</b>ë¥¼ ìˆ˜ì§‘í•˜ê³  ì‹¬ì¸µ ë¶„ì„í•©ë‹ˆë‹¤.</p>
        <div class="step-tags">
          <span class="step-tag">ğŸ“° ë‰´ìŠ¤</span>
          <span class="step-tag">â–¶ï¸ ìœ íŠœë¸Œ</span>
          <span class="step-tag">ë¹„ì¦ˆë‹ˆìŠ¤ ë¶„ì„</span>
          <span class="step-tag">ì¦ê¶ŒÂ·íˆ¬ì</span>
        </div>
      </div>
    </div>
    <div class="step">
      <div class="step-num">03</div>
      <div class="step-body">
        <h3>ë§¤ì¼ ì˜¤ì „ 9ì‹œ ì´ë©”ì¼ ë°°ë‹¬</h3>
        <p>ì¶œê·¼ ì „, ì˜¤ëŠ˜ì˜ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì‚¬ì´íŠ¸ê°€<br>ì´ë©”ì¼ë¡œ ì •ë¦¬ë˜ì–´ ë„ì°©í•©ë‹ˆë‹¤.</p>
        <div class="step-tags">
          <span class="step-tag">ğŸ“¬ ë§¤ì¼ ì˜¤ì „ 9:00</span>
          <span class="step-tag">ìë™ ë°œì†¡</span>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="viz-section" id="agents">
  <div class="viz-inner">
    <div class="section-label">AI AGENTS</div>
    <div class="section-title">8ëª…ì˜ ì „ë¬¸ ì—ì´ì „íŠ¸ê°€ ë§¤ì¼ ì§„í™”í•©ë‹ˆë‹¤</div>
    <div class="agent-grid">
      <div class="agent-card"><div class="agent-icon">ğŸ“Š</div><div class="agent-name">BA AGENT</div><div class="agent-desc">ë¹„ì¦ˆë‹ˆìŠ¤ ìˆ˜ìµ êµ¬ì¡° ë° ê²½ìŸì‚¬ ë¶„ì„</div><div class="agent-bar-wrap"><div class="agent-bar" style="width:92%;background:linear-gradient(90deg,#818cf8,#6366f1);"></div></div></div>
      <div class="agent-card"><div class="agent-icon">ğŸ“ˆ</div><div class="agent-name">STOCK AGENT</div><div class="agent-desc">ì£¼ì‹ ì‹œì¥ ë°˜ì‘ ë° íˆ¬ì ì¸ì‚¬ì´íŠ¸</div><div class="agent-bar-wrap"><div class="agent-bar" style="width:85%;background:linear-gradient(90deg,#34d399,#10b981);"></div></div></div>
      <div class="agent-card"><div class="agent-icon">ğŸ¯</div><div class="agent-name">PM AGENT</div><div class="agent-desc">ì„œë¹„ìŠ¤ ê¸°íš ì „ëµ ê´€ì  ë¸Œë¦¬í•‘</div><div class="agent-bar-wrap"><div class="agent-bar" style="width:88%;background:linear-gradient(90deg,#f472b6,#ec4899);"></div></div></div>
      <div class="agent-card"><div class="agent-icon">ğŸ‘¥</div><div class="agent-name">HR AGENT</div><div class="agent-desc">ì¡°ì§Â·ì¸ì‚¬ ê´€ë¦¬ ì œì•ˆ ë° íŠ¸ë Œë“œ</div><div class="agent-bar-wrap"><div class="agent-bar" style="width:79%;background:linear-gradient(90deg,#fb923c,#f97316);"></div></div></div>
      <div class="agent-card"><div class="agent-icon">ğŸ“°</div><div class="agent-name">BRIEF AGENT</div><div class="agent-desc">ë‰´ìŠ¤ í•µì‹¬ ìš”ì•½ ë° 1ì¤„ ë¸Œë¦¬í•‘</div><div class="agent-bar-wrap"><div class="agent-bar" style="width:95%;background:linear-gradient(90deg,#60a5fa,#3b82f6);"></div></div></div>
      <div class="agent-card"><div class="agent-icon">ğŸ”</div><div class="agent-name">KW AGENT</div><div class="agent-desc">í‚¤ì›Œë“œ í™•ì¥ ë° ì—°ê´€ íŠ¸ë Œë“œ ë°œêµ´</div><div class="agent-bar-wrap"><div class="agent-bar" style="width:82%;background:linear-gradient(90deg,#a78bfa,#7c3aed);"></div></div></div>
      <div class="agent-card"><div class="agent-icon">ğŸ“‰</div><div class="agent-name">DATA AGENT</div><div class="agent-desc">ìˆ˜ì¹˜Â·ë°ì´í„° ê¸°ë°˜ ì§€í‘œ í•´ì„</div><div class="agent-bar-wrap"><div class="agent-bar" style="width:77%;background:linear-gradient(90deg,#fbbf24,#f59e0b);"></div></div></div>
      <div class="agent-card"><div class="agent-icon">ğŸŒ</div><div class="agent-name">INFO AGENT</div><div class="agent-desc">ê¸€ë¡œë²Œ ì •ë³´ ìˆ˜ì§‘ ë° ë§¥ë½ ë¶„ì„</div><div class="agent-bar-wrap"><div class="agent-bar" style="width:84%;background:linear-gradient(90deg,#6ee7b7,#10b981);"></div></div></div>
    </div>
  </div>
</div>

<div class="preview-section">
  <div class="preview-inner">
    <div class="section-label" style="text-align:center;">REPORT PREVIEW</div>
    <div class="section-title">ì´ëŸ° ë¦¬í¬íŠ¸ê°€ ë§¤ì¼ ë„ì°©í•©ë‹ˆë‹¤</div>
    <div class="preview-card">
      <div class="preview-header">
        <div class="preview-dots">
          <div class="preview-dot" style="background:#ef4444;"></div>
          <div class="preview-dot" style="background:#f59e0b;"></div>
          <div class="preview-dot" style="background:#10b981;"></div>
        </div>
        <span class="preview-title">Fitz Intelligence â€” ì˜¤ì „ 9ì‹œ ë¸Œë¦¬í•‘</span>
      </div>
      <div class="preview-body">
        <div class="preview-kw-row">
          <span class="preview-kw">#ì¹´ì¹´ì˜¤ëª¨ë¹Œë¦¬í‹°</span>
          <span class="preview-kw">#ì˜ì¹´</span>
          <span class="preview-kw">#ììœ¨ì£¼í–‰</span>
        </div>
        <div class="preview-briefing">
          <div class="preview-briefing-label">ğŸ¤– ë¹„ì¦ˆë‹ˆìŠ¤ ë¶„ì„ ì¸ì‚¬ì´íŠ¸</div>
          <div class="preview-briefing-lines">
            <div class="preview-line" style="width:100%;"></div>
            <div class="preview-line" style="width:88%;"></div>
            <div class="preview-line" style="width:75%;"></div>
          </div>
        </div>
        <div class="preview-news">
          <div class="preview-news-item"><div class="preview-news-dot"></div><div class="preview-news-lines"><div class="preview-news-line-t" style="width:85%;"></div><div class="preview-news-line-s"></div></div></div>
          <div class="preview-news-item"><div class="preview-news-dot" style="background:#10b981;"></div><div class="preview-news-lines"><div class="preview-news-line-t" style="width:72%;"></div><div class="preview-news-line-s"></div></div></div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="cta-section">
  <h2>ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•˜ì„¸ìš”</h2>
  <p>ê°€ì… í›„ í‚¤ì›Œë“œ ë“±ë¡ê¹Œì§€ 1ë¶„.<br>ë‚´ì¼ ì˜¤ì „ 9ì‹œ, ì²« ë¦¬í¬íŠ¸ê°€ ë„ì°©í•©ë‹ˆë‹¤.</p>
  <button class="btn-main" onclick="handleStart()">ë¬´ë£Œë¡œ ì‹œì‘í•˜ê¸° â†’</button>
</div>

<footer>Â© 2026 Fitz Intelligence Â· AI ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì‚¬ì´íŠ¸ í”Œë«í¼</footer>

<!-- AUTH ì˜¤ë²„ë ˆì´ -->
<div id="auth-overlay" onclick="if(event.target===this)closeAuthOverlay()">
  <div class="auth-modal">

    <!-- ë·° A: ì¼ë°˜ ë¡œê·¸ì¸ -->
    <div id="view-login">
      <h2>ë¬´ë£Œë¡œ ì‹œì‘í•˜ê¸°</h2>
      <p class="auth-modal-sub">ì´ë©”ì¼ë¡œ ë¡œê·¸ì¸ ë§í¬ë¥¼ ë°›ì•„ ë°”ë¡œ ì‹œì‘í•˜ì„¸ìš”.</p>
      <input class="auth-input" type="email" id="email-input" placeholder="ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”"
             onkeydown="if(event.key==='Enter')sendMagicLink()">
      <button class="auth-submit" id="login-submit-btn" onclick="sendMagicLink()">ë¡œê·¸ì¸ ë§í¬ ë°›ê¸°</button>
      <div class="auth-close" onclick="closeAuthOverlay()">ë‹«ê¸°</div>
    </div>

    <!-- ë·° B: ê°€ì… ì œí•œ (ë§ˆìŠ¤í„°ê°€ ì œí•œ ONì¼ ë•Œ) -->
    <div id="view-waitlist" style="display:none;">
      <div class="waitlist-view">
        <div class="waitlist-icon">ğŸ™</div>
        <div class="waitlist-title">ì ì‹œ ê°€ì…ì´ ì œí•œë˜ì–´ ìˆì–´ìš”</div>
        <div class="waitlist-msg">
          ì£„ì†¡í•´ìš”. ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ í˜„ì¬ íšŒì› ê°€ì…ì„ ì œí•œí•˜ê³  ìˆì–´ìš”.<br><br>
          ì´ë©”ì¼ì„ ë‚¨ê²¨ì£¼ì‹œë©´ íšŒì›ê°€ì…ì´ ë‹¤ì‹œ ì—´ë¦´ ë•Œ ê°€ì¥ ë¨¼ì € ì•Œë ¤ë“œë¦´ê²Œìš”. ğŸ“¬
        </div>
        <div class="waitlist-input-wrap">
          <input class="auth-input" type="email" id="waitlist-email" placeholder="ì•Œë¦¼ ë°›ì„ ì´ë©”ì¼ ì£¼ì†Œ"
                 onkeydown="if(event.key==='Enter')submitWaitlist()"
                 style="margin-bottom:0;">
          <button class="waitlist-submit" id="waitlist-submit-btn" onclick="submitWaitlist()">ëŒ€ê¸° ì‹ ì²­í•˜ê¸°</button>
          <div id="waitlist-done" class="waitlist-done" style="display:none;">
            âœ… ë“±ë¡ ì™„ë£Œ! íšŒì›ê°€ì…ì´ ì—´ë¦¬ë©´ ì´ë©”ì¼ë¡œ ì•Œë ¤ë“œë¦´ê²Œìš”.
          </div>
        </div>
      </div>
      <div class="auth-close" onclick="closeAuthOverlay()">ë‹«ê¸°</div>
    </div>

  </div>
</div>

<script>
const sc = supabase.createClient(
  'https://zrlpwmpbrvohautldcon.supabase.co',
  'sb_publishable_nIc584au5zdVZkC7uCe2kg_sEFEMD-G'
);
let isLogged = false;
let signupOpen = true; // ê¸°ë³¸ê°’: ê°€ì… í—ˆìš© (DBì—ì„œ override)

/* â”€â”€ ì„¸ì…˜ í™•ì¸ + ê°€ì… ì œí•œ ì—¬ë¶€ ë¡œë“œ â”€â”€ */
async function checkSession() {
  const [sessionRes, settingRes] = await Promise.all([
    sc.auth.getSession(),
    sc.from('app_settings').select('value').eq('key', 'signup_open').maybeSingle()
  ]);

  if (sessionRes.data?.session) {
    isLogged = true;
    ['main-cta','nav-cta'].forEach(id => {
      const b = document.getElementById(id);
      if (b) { b.textContent = 'ë©”ì¸í™”ë©´ ë°”ë¡œê°€ê¸° â†’'; if (id==='main-cta') b.style.background='#111'; }
    });
  }

  // DBì— ì„¤ì •ì´ ìˆìœ¼ë©´ ì ìš©, ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ true(í—ˆìš©)
  if (settingRes.data) {
    signupOpen = settingRes.data.value === 'true' || settingRes.data.value === true;
  }
}

function handleStart() {
  if (isLogged) { location.href = 'app.html'; return; }
  document.getElementById('auth-overlay').style.display = 'block';
  // ê°€ì… ì œí•œ ì—¬ë¶€ì— ë”°ë¼ ë·° ì „í™˜
  document.getElementById('view-login').style.display    = signupOpen ? 'block' : 'none';
  document.getElementById('view-waitlist').style.display = signupOpen ? 'none'  : 'block';
}

function closeAuthOverlay() {
  document.getElementById('auth-overlay').style.display = 'none';
}

/* â”€â”€ ë§ˆë²• ë§í¬ ì „ì†¡ â”€â”€ */
async function sendMagicLink() {
  const email = document.getElementById('email-input').value.trim();
  if (!email) return alert('ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
  const btn = document.getElementById('login-submit-btn');
  btn.disabled = true; btn.textContent = 'ì „ì†¡ ì¤‘...';
  const { error } = await sc.auth.signInWithOtp({
    email,
    options: { emailRedirectTo: 'https://newsbot-smoky.vercel.app/app.html' }
  });
  btn.disabled = false; btn.textContent = 'ë¡œê·¸ì¸ ë§í¬ ë°›ê¸°';
  if (error) alert('ì—ëŸ¬: ' + error.message);
  else alert('ë¡œê·¸ì¸ ë§í¬ê°€ ì´ë©”ì¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
}

/* â”€â”€ ëŒ€ê¸° ì‹ ì²­ â”€â”€ */
async function submitWaitlist() {
  const email = document.getElementById('waitlist-email').value.trim();
  if (!email) return alert('ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
  const btn = document.getElementById('waitlist-submit-btn');
  btn.disabled = true; btn.textContent = 'ì‹ ì²­ ì¤‘...';
  try {
    // ì¤‘ë³µ ë°©ì§€: upsert
    const { error } = await sc.from('signup_waitlist').upsert(
      { email, created_at: new Date().toISOString(), notified: false },
      { onConflict: 'email' }
    );
    if (error) throw error;
    document.getElementById('waitlist-done').style.display = 'block';
    document.getElementById('waitlist-email').style.display = 'none';
    btn.style.display = 'none';
  } catch(e) {
    btn.disabled = false; btn.textContent = 'ëŒ€ê¸° ì‹ ì²­í•˜ê¸°';
    alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
    console.error(e);
  }
}

checkSession();
</script>
</body>
</html>
